Automated Test Log
Timestamp: 2025-12-27T20:25:35.9729800-03:00
Node: v22.11.0
NPM: 10.9.0

Command: npm test


> payment-gateway-api@1.0.0 test
> vitest run


[7m[1m[36m RUN [39m[22m[27m [36mv1.6.1[39m [90mD:/Projetos/SANDBOX/axion-pay/payment[39m

GET /health 200 4.134 ms - 59 - reqId=68c7430a-63ef-4707-a84c-ab4e5ba87a9d
POST /payments/pix 201 5.764 ms - 751 - reqId=4b984fe4-df71-4ca3-9fcc-5d2bb720bfd8
[90mstdout[2m | tests/payments.test.js[2m > [22m[2mPayment API[2m > [22m[2mcreates a PIX payment[22m[39m
[INFO] Criando pagamento {
  transactionId: [32m'17cdc162-d5a0-4282-9333-87d844a34ae8'[39m,
  method: [32m'pix'[39m
}
[INFO] Criando cobranca PIX (mock) {
  amount_cents: [33m1234[39m,
  currency: [32m'BRL'[39m,
  metadataKeys: [ [32m'order'[39m, [32m'transactionId'[39m ]
}

POST /payments/card 201 2.555 ms - 748 - reqId=29c215f8-b6c5-4433-9f2a-64bb3678a29b
[90mstdout[2m | tests/payments.test.js[2m > [22m[2mPayment API[2m > [22m[2mrespects idempotency key[22m[39m
[INFO] Criando pagamento {
  transactionId: [32m'00aae19a-9c24-49a4-93e8-00cb0a2e0037'[39m,
  method: [32m'card'[39m
}

POST /payments/card 200 0.858 ms - 748 - reqId=1c0f111a-09b7-45be-9135-09e0f3e957f4
POST /payments/card 201 1.399 ms - 720 - reqId=312f4ca5-e51d-4ac4-98f6-03f1472d6270
[90mstdout[2m | tests/payments.test.js[2m > [22m[2mPayment API[2m > [22m[2mcreates a card payment with capture=false as authorized[22m[39m
[INFO] Criando pagamento {
  transactionId: [32m'a9394e05-41c7-40ed-b27f-5f63b24d6533'[39m,
  method: [32m'card'[39m
}

POST /webhooks/pix 200 7.494 ms - 889 - reqId=bb069c09-e94b-46b9-9dc9-8ad64a17e6cd
[90mstdout[2m | tests/payments.test.js[2m > [22m[2mPayment API[2m > [22m[2mprocesses PIX webhook with valid signature[22m[39m
[INFO] Confirmando pagamento PIX (mock) { providerReference: [32m'PIX-1766877941539'[39m }

GET /payments/stats 200 1.907 ms - 151 - reqId=ba960ec1-5f94-4927-a9cb-e54c91e5773f
 [32m[39m tests/payments.test.js [2m ([22m[2m6 tests[22m[2m)[22m[33m 1168[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m6 passed[39m[22m[90m (6)[39m
[2m   Start at [22m 20:25:38
[2m   Duration [22m 2.99s[2m (transform 434ms, setup 0ms, collect 383ms, tests 1.17s, environment 0ms, prepare 769ms)[22m

